<!DOCTYPE HTML>
<html>
<head>
    <style>
        html, body
        {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body>
    <div id="container" style="width: 100%; height: 100%"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.2.min.js"></script>
    <script defer="defer">
        var stage = new Kinetic.Stage({
            container: 'container',
            height: 600,
            width: 800
        });
        var layer = new Kinetic.Layer();

        var imageObj = new Image();
        imageObj.src = 'http://images4.wikia.nocookie.net/__cb20120101131538/smosh/images/b/b2/Pink_frosted_sprinkled_donut.jpg';
        var donut = new Kinetic.Image({
            x: 140,
            y: stage.getHeight() / 2 - 9,
            image: imageObj,
            width: 150,
            height: 150,
            offset: [59, 53]
        });

        // add the shape to the layer
        layer.add(donut);

        // add the layer to the stage
        stage.add(layer);
        

        var amplitude = 150;
        var period = 1000;
        // in ms
        var centerX = stage.getWidth() / 2;

        var anim = new Kinetic.Animation(function (frame) {
            donut.setX(amplitude * Math.sin(frame.time * 2 * Math.PI / period) + centerX);
        }, layer);

        anim.start();
        
        var angularSpeed = Math.PI / 2;
        var animRotate = new Kinetic.Animation(function (frame) {
            var angleDiff = frame.timeDiff * angularSpeed / 1000;
            donut.rotate(angleDiff);
        }, layer);

        animRotate.start();

    </script>
</body>
</html>
